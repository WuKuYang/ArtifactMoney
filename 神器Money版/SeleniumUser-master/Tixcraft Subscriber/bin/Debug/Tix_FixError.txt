
function FixSubmitError()
{

    var iIndexOfArray = 0;
    for(var i =0; i < document.scripts.length ; i++)
    {
        if(StringContain(document.scripts[i].text , ".attr(\"name\", \"TicketForm[ticketPrice]"))
        {
            iIndexOfArray = i;
            break;
        }
    }

    var iTableArrayLeft = document.scripts[iIndexOfArray].text.indexOf("mousedown click touchstart"); //°}¦CÀY);
    var iTableArrayRight = document.scripts[iIndexOfArray].text.indexOf("var count = valueCount(ticketType)"); //°}¦C§À

    var strSubText = document.scripts[iIndexOfArray].text.substring(iTableArrayLeft+1,iTableArrayRight-1);

    var findTextA = ".attr(\"name\", \"TicketForm[ticketPrice]";
    var findTextB = "TicketForm[agree]";

    var  vSA = strSubText.substr(strSubText.indexOf(findTextA) + findTextA.length+1);
    var  vSB = strSubText.substr(strSubText.indexOf(findTextB) + findTextB.length+1);
    var elementTextA = vSA.substring(0 , vSA.indexOf("]\");")); // TicketForm[ticketPrice]
    var elementTextB = vSB.substring(0 , vSB.indexOf("]\");")); // TicketForm[agree]

    //var iTicketFeild = document.getElementsByTagName('select');
    var iTicketFeild  = document.getElementById("TicketForm_checked");


    if(iTicketFeild !=undefined)
    {
        iTicketFeild.setAttribute("name", "TicketForm[ticketPrice]" + "[" + elementTextA + "]");
    }
    var mAgree  = document.getElementById("TicketForm_agree");
    if(mAgree !=undefined)
    {
        mAgree.setAttribute("name", "TicketForm[agree]" +  "[" + elementTextB + "]");
    }
}


function StringContain(SMsg , InnerString)
{
    if(SMsg.indexOf(InnerString) > -1)
    {
        return true;
    }
    else
    {
        return false;
    }
}

FixSubmitError();